<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
    <script data-goatcounter="https://jrenedo.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

    <title>Simulacro Examen - AD</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #eef2ff; 
            min-height: 100vh; 
            display: flex; 
            flex-direction: column;
        }
        
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .option-card { transition: all 0.2s ease; }
        .option-card:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        
        .sticky-footer {
            position: sticky;
            bottom: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 1rem;
            z-index: 50;
            border-bottom-left-radius: 1rem;
            border-bottom-right-radius: 1rem;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="py-8 px-4">

    <div class="bg-white rounded-2xl shadow-xl w-full max-w-3xl mx-auto border-t-4 border-indigo-600 flex flex-col relative">
        
        <div class="bg-indigo-600 p-5 text-white flex justify-between items-center rounded-t-lg shadow-sm z-10">
            <h1 class="text-lg font-bold flex items-center gap-2">
                <i class="fas fa-book-reader"></i> Simulacro General
            </h1>
            <div id="status-bar" class="hidden flex gap-3 text-sm font-medium">
                <div class="bg-indigo-700 px-3 py-1 rounded-lg flex items-center gap-2">
                    <span class="text-indigo-200"><i class="fas fa-check"></i> <span id="score-display">0</span></span>
                    <span class="text-red-200 ml-2"><i class="fas fa-times"></i> <span id="errors-display">0</span></span>
                </div>
                <div class="bg-indigo-500 px-3 py-1 rounded-full w-20 text-center">
                    <span id="current-q">1</span>/<span id="total-q">0</span>
                </div>
            </div>
        </div>

        <div class="p-6 sm:p-8 flex-grow">
            
            <div id="start-screen" class="text-center space-y-8 fade-in py-8">
                <div class="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center mx-auto text-indigo-600 text-4xl mb-4 shadow-sm">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Simulacro de Examen</h2>
                    <p class="text-gray-500">Bater√≠a de preguntas oficiales de repaso.</p>
                </div>
                
                <div class="grid grid-cols-2 gap-4 max-w-xs mx-auto text-sm text-gray-600">
                    <div class="bg-white p-3 rounded-lg border border-gray-200 shadow-sm">
                        <i class="fas fa-list-ol text-indigo-500 mb-1 block text-lg"></i>
                        <span id="start-total-q">--</span> Preguntas
                    </div>
                    <div class="bg-white p-3 rounded-lg border border-gray-200 shadow-sm">
                        <i class="fas fa-random text-indigo-500 mb-1 block text-lg"></i>
                        Orden Aleatorio
                    </div>
                </div>

                <button id="btn-start" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-10 rounded-xl w-full max-w-sm mx-auto shadow-lg transition-transform transform hover:scale-105 flex justify-center items-center gap-2 text-lg">
                    <i class="fas fa-play"></i> Comenzar Test
                </button>
            </div>

            <div id="quiz-screen" class="hidden flex flex-col fade-in">
                <div class="mb-6">
                    <span class="text-xs font-bold text-indigo-600 uppercase tracking-wider mb-2 block">Pregunta</span>
                    <h3 id="question-text" class="text-xl sm:text-2xl font-bold text-gray-800 leading-snug"></h3>
                </div>

                <div id="options-container" class="space-y-3"></div>

                <div id="feedback-area" class="hidden mt-8 pt-6 border-t border-gray-100 fade-in">
                    <div class="flex gap-4 mb-4 items-start bg-indigo-50 p-5 rounded-xl border border-indigo-100 shadow-sm">
                        <div id="feedback-icon" class="text-2xl flex-shrink-0 mt-1"></div>
                        <div>
                            <h4 id="feedback-title" class="font-bold text-base mb-1"></h4>
                            <p id="feedback-text" class="text-gray-700 text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="result-screen" class="hidden text-center space-y-8 fade-in py-8">
                <div class="relative inline-block">
                    <div class="w-32 h-32 mx-auto rounded-full flex items-center justify-center text-5xl shadow-xl relative z-10 bg-white border-4" id="score-circle"></div>
                </div>
                
                <div>
                    <h2 class="text-4xl font-black text-gray-800 mb-1" id="final-score-text">0/0</h2>
                    <p class="text-gray-500 text-sm font-semibold uppercase">Resultado Final</p>
                </div>

                <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden max-w-sm mx-auto">
                    <div id="final-progress-bar" class="bg-indigo-600 h-full rounded-full transition-all duration-1000" style="width: 0%"></div>
                </div>
                
                <p id="score-message" class="font-medium text-indigo-700 text-lg"></p>

                <div class="flex flex-col gap-3 max-w-xs mx-auto pt-4">
                    <button id="retry-failed-btn" class="hidden bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-md w-full transition-colors flex justify-center items-center gap-2">
                        <i class="fas fa-hammer"></i> Repasar Fallos
                    </button>
                    <button id="btn-restart" class="bg-white border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50 font-bold py-3 px-6 rounded-lg w-full transition-colors">
                        <i class="fas fa-redo"></i> Reiniciar Todo
                    </button>
                </div>
            </div>

        </div>

        <div id="next-container" class="hidden sticky-footer">
            <button id="btn-next" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-xl text-lg shadow-md transition-colors flex justify-center items-center gap-2">
                Siguiente Pregunta <i class="fas fa-arrow-right"></i>
            </button>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
// --- BASE DE DATOS LITERAL (41 PREGUNTAS FILTRADAS) ---
        const rawQuestions = [
            
            // --- BLOQUE 1: JDBC Y BASES DE DATOS ---
            {
                q: "¬øCu√°l es la principal caracter√≠stica y ventaja de una base de datos embebida?",
                options: [
                    "Requiere una interfaz externa para su mantenimiento, lo que aumenta la seguridad.",
                    "Se conecta a trav√©s de un driver ODBC y requiere mapeo Objeto-Relacional.",
                    "Se instala y se ejecuta como parte del software de la aplicaci√≥n, siendo invisible para el usuario.",
                    "Es ideal para gestionar grandes cantidades de datos que requieren la intervenci√≥n del usuario final."
                ],
                correct: 2,
                justification: "Se integra dentro de la propia aplicaci√≥n (como H2 o SQLite) sin necesitar un servidor independiente."
            },
            {
                q: "¬øCu√°l es el principal prop√≥sito de la API JDBC (Java Database Connectivity)?",
                options: [
                    "Implementar la arquitectura Modelo-Vista-Controlador (MVC) para la persistencia.",
                    "Establecer una conexi√≥n y comunicaci√≥n uniforme entre una aplicaci√≥n Java y un controlador de base de datos relacional.",
                    "Permitir la creaci√≥n de bases de datos embebidas.",
                    "Facilitar el mapeo Objeto-Relacional (ORM) en Java."
                ],
                correct: 1,
                justification: "Es el est√°ndar que permite a Java 'hablar' SQL con cualquier base de datos relacional."
            },
            {
                q: "¬øQu√© interfaz JDBC se utiliza exclusivamente para recoger el resultado de una consulta de selecci√≥n (SELECT) en forma de tabla de datos, permitiendo el avance solo hacia adelante a trav√©s de los registros?",
                options: [
                    "ResultSet.",
                    "Connection.",
                    "Statement.",
                    "CallableStatement."
                ],
                correct: 0,
                justification: "El ResultSet act√∫a como un cursor que recorre las filas devueltas por la base de datos."
            },
            {
                q: "¬øCu√°l es la interfaz JDBC recomendada para ejecutar operaciones SQL con par√°metros din√°micos, que son representados por un s√≠mbolo de interrogaci√≥n (?) en la sentencia?",
                options: [
                    "CallableStatement.",
                    "PreparedStatement.",
                    "Statement.",
                    "ResultSet."
                ],
                correct: 1,
                justification: "PreparedStatement precompila la consulta y gestiona los par√°metros de forma segura contra inyecci√≥n SQL."
            },
            {
                q: "¬øQu√© m√©todo de la interfaz Connection debe establecerse a false para poder gestionar las transacciones de manera manual en JDBC?",
                options: [
                    "commit().",
                    "getConnection().",
                    "rollback().",
                    "setAutoCommit(boolean)."
                ],
                correct: 3,
                justification: "Al poner setAutoCommit(false), tomamos el control manual de cu√°ndo confirmar (commit) o deshacer (rollback) los cambios."
            },

            // --- BLOQUE 2: XML Y BASES NATIVAS ---
            {
                q: "¬øCu√°l de las siguientes opciones se considera una ventaja de las Bases de Datos Nativa XML?",
                options: [
                    "La indexaci√≥n de su contenido es tan sencilla como en una base de datos relacional.",
                    "La modificaci√≥n de datos se realiza de forma at√≥mica sobre cualquier parte del documento.",
                    "El espacio de almacenamiento es m√≠nimo.",
                    "Permiten guardar datos de forma heterog√©nea y recuperar su integridad y estado original."
                ],
                correct: 3,
                justification: "Son ideales para datos semi-estructurados o heterog√©neos, preservando la jerarqu√≠a original."
            },
            {
                q: "El lenguaje XQuery est√° considerado como una extensi√≥n directa de qu√© otro est√°ndar de lenguajes de consulta XML:",
                options: [
                    "XPath 2.0.",
                    "XSLT.",
                    "XML Schema.",
                    "XUpdate."
                ],
                correct: 0,
                justification: "XQuery incluye XPath 2.0 como subconjunto y lo ampl√≠a con capacidades de consulta complejas (FLWOR)."
            },
            {
                q: "¬øQu√© lenguaje, seg√∫n el contenido, es utilizado por las Bases de Datos Nativa XML para recorrer los nodos de un documento?",
                options: [
                    "XUpdate.",
                    "DOM.",
                    "XSLT.",
                    "XPath."
                ],
                correct: 3,
                justification: "XPath es el lenguaje est√°ndar dise√±ado para navegar y seleccionar nodos en un √°rbol XML."
            },
            {
                q: "¬øCu√°l es la caracter√≠stica principal de una Base de Datos Nativa XML (NXD)?",
                options: [
                    "Se caracteriza por una indexaci√≥n sencilla y r√°pida de todos sus contenidos por defecto.",
                    "Guarda los datos exclusivamente en documentos XML, bas√°ndose en un modelo l√≥gico para ellos.",
                    "Almacena los datos en tablas relacionales para su f√°cil consulta.",
                    "Utiliza un motor de almacenamiento de tipo BLOB para la persistencia del documento completo."
                ],
                correct: 1,
                justification: "Su unidad l√≥gica es el documento XML (√°rbol), no filas y columnas."
            },
            {
                q: "¬øQu√© lenguaje de consulta se utiliza habitualmente para bases de datos XML?",
                options: [
                    "HQL (Hibernate Query Language).",
                    "OQL (Object Query Language).",
                    "SQL (Structured Query Language).",
                    "XQuery (XML Query Language)."
                ],
                correct: 3,
                justification: "XQuery es el est√°ndar W3C para consultar colecciones de datos XML."
            },
            {
                q: "En el contexto de la base de datos eXist-db, ¬øqu√© se entiende por 'recurso' y a qu√© equivaldr√≠a en un sistema de archivos?",
                options: [
                    "Un servicio, equivalente a un programa ejecutable.",
                    "Una colecci√≥n, equivalente a una carpeta.",
                    "Un controlador, equivalente a un driver.",
                    "Un fichero o documento, que puede ser XML o binario."
                ],
                correct: 3,
                justification: "En eXist-db, 'Colecci√≥n' = Carpeta y 'Recurso' = Archivo."
            },
            {
                q: "En una Base de Datos Nativa XML, ¬øqu√© elemento desempe√±a un rol an√°logo al de las tablas en una base de datos relacional?",
                options: [
                    "Las colecciones.",
                    "Los identificadores √∫nicos (ID).",
                    "Los nodos XML.",
                    "Los recursos."
                ],
                correct: 0,
                justification: "Las Colecciones agrupan documentos, de forma an√°loga a como las Tablas agrupan filas."
            },
            {
                q: "¬øQu√© API de an√°lisis sint√°ctico (parser) de XML se caracteriza por cargar el documento XML completo en memoria como una estructura en √°rbol, permitiendo la navegaci√≥n bidireccional, pero consumiendo m√°s recursos y siendo m√°s lenta?",
                options: [
                    "DOM (Document Object Model).",
                    "SAX (Simple API for XML).",
                    "XQuery (XML Query Language).",
                    "JAXB (Java XML API Binding)."
                ],
                correct: 0,
                justification: "DOM carga todo el XML en la memoria RAM, lo que permite moverte adelante y atr√°s pero consume mucha memoria."
            },

            // --- BLOQUE 3: EJB Y COMPONENTES ---
            {
                q: "¬øQu√© tipo de EJB Session Bean se caracteriza por mantener el estado de conversaci√≥n de un cliente a trav√©s de m√∫ltiples solicitudes, con variables de instancia que representan un estado √∫nico de sesi√≥n?",
                options: [
                    "Singleton.",
                    "Message Driven.",
                    "Stateful.",
                    "Stateless."
                ],
                correct: 2,
                justification: "Stateful (con estado) recuerda los datos del cliente entre varias llamadas."
            },
            {
                q: "¬øQu√© Integrated Development Environment (IDE) es particularmente conocido por facilitar el desarrollo de aplicaciones por m√≥dulos o componentes, siendo considerado un IDE ideal para este tipo de arquitectura?",
                options: [
                    "JBuilder.",
                    "IntelliJ Idea.",
                    "NetBeans.",
                    "Eclipse."
                ],
                correct: 2,
                justification: "NetBeans destaca por su arquitectura de plataforma modular (NetBeans Platform)."
            },
            {
                q: "Dentro de la arquitectura EJB, ¬øcu√°l es la anotaci√≥n que debe usarse en una interfaz de negocio para indicar que sus m√©todos pueden ser invocados por un cliente remoto?",
                options: [
                    "@Entity.",
                    "@Remote.",
                    "@Stateless.",
                    "@Local."
                ],
                correct: 1,
                justification: "@Remote expone el bean para acceso desde fuera de la JVM (m√°quina virtual) local."
            },
            {
                q: "En el modelo JavaBeans, ¬øc√≥mo se denomina la propiedad que representa una lista de valores (como un array) y que proporciona m√©todos espec√≠ficos para acceder y modificar elementos individuales a trav√©s de un √≠ndice?",
                options: [
                    "Propiedad Restringida.",
                    "Propiedad Indexada.",
                    "Propiedad Ligada.",
                    "Propiedad Simple."
                ],
                correct: 1,
                justification: "Las propiedades indexadas manejan colecciones de datos accesibles por un √≠ndice num√©rico."
            },
            {
                q: "¬øCu√°l de los siguientes no es un tipo principal de Enterprise Java Bean (EJB)?",
                options: [
                    "Beans de Entidad (Entity Beans).",
                    "Beans de Interfaz (Interface Beans).",
                    "Beans Controlados por Mensajes (Message Driven Beans).",
                    "Beans de Sesi√≥n (Session Beans)."
                ],
                correct: 1,
                justification: "Los tipos reales son Sesi√≥n, Entidad (ahora JPA) y Mensajer√≠a. 'Beans de Interfaz' no existe como categor√≠a."
            },
            {
                q: "¬øQu√© tipo de propiedad de un Java Bean desencadena un evento cuando su valor cambia, requiriendo los m√©todos addPropertyChangeListener() y removePropertyChangeListener()?",
                options: [
                    "Propiedad Restringida.",
                    "Propiedad Simple.",
                    "Propiedad Indexada.",
                    "Propiedad Ligada (Bound)."
                ],
                correct: 3,
                justification: "Las propiedades Ligadas (Bound) avisan a los 'listeners' cuando cambian."
            },

            // --- BLOQUE 4: JPA Y ORM ---
            {
                q: "¬øQu√© interfaz de la API JPA es la encargada de gestionar el ciclo de vida de las entidades (como persist, merge o remove) y de ejecutar las acciones entre las entidades y la base de datos?",
                options: [
                    "Entity Transaction.",
                    "Persistence Unit.",
                    "EntityManager.",
                    "EntityManagerFactory."
                ],
                correct: 2,
                justification: "El EntityManager es el gestor principal de JPA para todas las operaciones de persistencia."
            },
            {
                q: "¬øCu√°l es una caracter√≠stica clave del HQL (Hibernate Query Language)?",
                options: [
                    "Requiere la creaci√≥n de sentencias SQL nativas para todas las operaciones de selecci√≥n de datos.",
                    "Es un lenguaje que solo puede ejecutarse directamente en la consola de la base de datos.",
                    "Est√° totalmente acoplado al gestor de bases de datos relacionales utilizado.",
                    "Es un lenguaje de consulta orientado a objetos que utiliza clases y atributos en lugar de tablas y columnas, y es independiente del gestor de BBDD."
                ],
                correct: 3,
                justification: "HQL te permite escribir consultas sobre el modelo de objetos Java, sin preocuparte por las tablas SQL subyacentes."
            },
            {
                q: "¬øCu√°l de las siguientes caracter√≠sticas destaca la independencia de la base de datos en las herramientas ORM?",
                options: [
                    "La limitaci√≥n a ser solo compatibles con un √∫nico tipo de base de datos relacional.",
                    "La necesidad de reescribir las consultas si se migra a otra base de datos.",
                    "La obligatoriedad de usar √∫nicamente el mapeo mediante ficheros XML.",
                    "La abstracci√≥n que permite escribir consultas independientemente del gestor de base de datos que se est√© utilizando, facilitando la migraci√≥n."
                ],
                correct: 3,
                justification: "El ORM traduce tus consultas abstractas al dialecto SQL espec√≠fico del motor que uses (Oracle, MySQL, etc.)."
            },
            {
                q: "¬øCu√°l es la funci√≥n principal de la interfaz Session en Hibernate?",
                options: [
                    "Se encarga de la configuraci√≥n inicial de la conexi√≥n a la base de datos.",
                    "Se usa exclusivamente para transformar objetos Java a sentencias SQL.",
                    "Es un objeto ligero y seguro que gestiona las transacciones y proporciona operaciones CRUD (Creaci√≥n, Lectura, Actualizaci√≥n y Borrado) para los objetos persistentes.",
                    "Se utiliza para cerrar definitivamente la SessionFactory."
                ],
                correct: 2,
                justification: "Session es la interfaz principal de trabajo en Hibernate para guardar y recuperar objetos."
            },
            {
                q: "En el ciclo de vida de un objeto gestionado por Hibernate, ¬øen qu√© estado se encuentra una instancia de clase persistente cuando tiene una representaci√≥n en la base de datos con un identificador y est√° asociada a una sesi√≥n?",
                options: [
                    "Estado Transitorio (Transient).",
                    "Estado Persistente (Persistent).",
                    "Estado Ligado (Bound).",
                    "Estado Separado (Detached)."
                ],
                correct: 1,
                justification: "Persistent significa que el objeto est√° 'vivo' en la base de datos y vigilado por la sesi√≥n actual."
            },
            {
                q: "¬øQu√© anotaci√≥n se utiliza en una clase Java para indicar que ese atributo no se debe guardar en la base de datos (es decir, que no es persistente)?",
                options: [
                    "@Id",
                    "@OrderBy",
                    "@Transient",
                    "@Column(name='transient_field')"
                ],
                correct: 2,
                justification: "@Transient indica que el campo es temporal y no debe guardarse en la tabla."
            },
            {
                q: "¬øCu√°l es la t√©cnica principal del mapeo objeto-relacional (ORM) en lenguajes de programaci√≥n orientados a objetos?",
                options: [
                    "La conversi√≥n autom√°tica de los datos de objetos a los atributos de las tablas de una base de datos relacional y viceversa.",
                    "La sustituci√≥n de todas las consultas SQL por c√≥digo nativo del lenguaje.",
                    "La creaci√≥n de bases de datos orientadas a objetos a partir de clases Java.",
                    "El uso exclusivo de la API JDBC para realizar todas las operaciones de persistencia."
                ],
                correct: 0,
                justification: "ORM significa 'Mapeo Objeto-Relacional': traducir autom√°ticamente entre objetos y tablas."
            },
            {
                q: "En un archivo de mapeo de Hibernate (.hbm.xml), ¬øqu√© elemento se utiliza para definir la clave primaria de una clase persistente?",
                options: [
                    "<generator>",
                    "<property>",
                    "<class>",
                    "<id>"
                ],
                correct: 3,
                justification: "La etiqueta <id> se usa en los XML de Hibernate para definir la Primary Key."
            },

            // --- BLOQUE 5: PL/SQL, BDOO Y OQL ---
            {
                q: "En PL/SQL, los tipos de datos se clasifican en scalar y otro tipo que se utiliza para almacenar datos m√°s complejos y grandes como im√°genes o videos. ¬øCu√°l es este otro tipo?",
                options: [
                    "NUMBER.",
                    "LARGE OBJECT (LOB).",
                    "BOOLEAN.",
                    "BINARY_INTEGER."
                ],
                correct: 1,
                justification: "LOB (Large Object) se usa para grandes vol√∫menes de datos (BLOB para binarios, CLOB para texto)."
            },
            {
                q: "Una de las principales caracter√≠sticas de las Bases de Datos Orientadas a Objetos (BDOO), heredada de la programaci√≥n orientada a objetos, es la Encapsulaci√≥n. ¬øEn qu√© consiste?",
                options: [
                    "La ocultaci√≥n de informaci√≥n del objeto, evitando accesos o modificaciones incorrectas o no autorizadas.",
                    "La propiedad de una operaci√≥n que puede aplicarse a objetos de distinta clase.",
                    "La capacidad de crear nuevos tipos de objetos a partir de los ya existentes.",
                    "La representaci√≥n de la informaci√≥n mediante filas y columnas de una tabla."
                ],
                correct: 0,
                justification: "La encapsulaci√≥n protege el estado interno del objeto, exponiendo solo lo necesario."
            },
            {
                q: "En el lenguaje de consultas para objetos (OQL), ¬øqu√© s√≠mbolo se utiliza para definir una variable, como las que se usan en las expresiones FLWOR?",
                options: [
                    "@",
                    "$",
                    "#",
                    "%"
                ],
                correct: 1,
                justification: "El s√≠mbolo '$' (d√≥lar) se utiliza para declarar variables (ej: $variable)."
            },
            {
                q: "¬øQu√© sentencia de SQL (Data Definition Language) se utiliza en PL/SQL para crear un nuevo tipo de dato que encapsula una estructura de datos y m√©todos, conocido como objeto?",
                options: [
                    "CREATE CLASS",
                    "CREATE TYPE",
                    "DECLARE OBJECT",
                    "CREATE OBJECT"
                ],
                correct: 1,
                justification: "La sintaxis est√°ndar es 'CREATE TYPE nombre AS OBJECT...'."
            },
            {
                q: "¬øCu√°l de las siguientes secciones de un bloque PL/SQL es obligatoria y contiene la l√≥gica principal y las sentencias SQL que deben ejecutarse?",
                options: [
                    "EXCEPTION",
                    "END",
                    "BEGIN",
                    "DECLARE"
                ],
                correct: 2,
                justification: "Todo bloque PL/SQL debe tener al menos la secci√≥n ejecutable delimitada por BEGIN y END."
            },
            {
                q: "En el contexto de la orientaci√≥n a objetos en bases de datos, ¬øc√≥mo se define el polimorfismo?",
                options: [
                    "La ocultaci√≥n de datos de un objeto, permitiendo su modificaci√≥n solo por operaciones definidas por el objeto.",
                    "La propiedad de una operaci√≥n que puede aplicarse a objetos de distinta clase, ofreciendo una respuesta diferente.",
                    "La capacidad de un objeto de guardar sus datos en la base de datos sin un mapeo expl√≠cito.",
                    "La relaci√≥n jer√°rquica entre una clase general y una m√°s espec√≠fica."
                ],
                correct: 1,
                justification: "Polimorfismo: Misma operaci√≥n, distinto comportamiento seg√∫n la clase del objeto."
            },
            {
                q: "¬øQu√© elementos utiliza el lenguaje de consultas para objetos (OQL) en sus sentencias en lugar de los nombres de las tablas del modelo relacional?",
                options: [
                    "El nombre de los atributos de la clase Java.",
                    "Los nombres de las Clases.",
                    "Los nombres de los ficheros.",
                    "Las direcciones de memoria."
                ],
                correct: 1,
                justification: "OQL consulta sobre Clases y Objetos, no sobre Tablas."
            },

            // --- BLOQUE 6: FICHEROS Y DDL ---
            {
                q: "¬øQu√© clase del paquete java.io lee ficheros de texto de manera eficiente al utilizar un b√∫fer de entrada de caracteres?",
                options: [
                    "BufferedWriter.",
                    "FileReader.",
                    "BufferedReader.",
                    "FileInputStream."
                ],
                correct: 2,
                justification: "BufferedReader envuelve un Reader y a√±ade un b√∫fer para mejorar la eficiencia de lectura."
            },
            {
                q: "En Java, para asegurar que el separador de directorios en una ruta (/ o \\) sea correcto independientemente del sistema operativo, ¬øqu√© constante de la clase File se debe usar?",
                options: [
                    "File.PATH_SEPARATOR",
                    "File.SEPARATOR",
                    "File.OS_SEPARATOR",
                    "File.SYSTEM_SEPARATOR"
                ],
                correct: 1,
                justification: "File.SEPARATOR (a menudo en may√∫sculas en ex√°menes, 'separator' en c√≥digo real) contiene el separador correcto (slash o backslash)."
            },
            {
                q: "En el contexto de la documentaci√≥n de c√≥digo Java, ¬øqu√© funci√≥n tiene el tag @since en un bloque de JavaDoc?",
                options: [
                    "Sirve para poner el autor del desarrollo.",
                    "Se usa para definir la versi√≥n del m√©todo o la clase (desde cu√°ndo existe).",
                    "Define los par√°metros de entrada.",
                    "Marca el c√≥digo como obsoleto."
                ],
                correct: 1,
                justification: "@since indica la versi√≥n de software en la que se introdujo esa funcionalidad."
            },
            {
                q: "¬øQu√© es un b√∫fer en el contexto de la gesti√≥n de ficheros?",
                options: [
                    "Un bloque de memoria que permite almacenar temporalmente los datos para reducir accesos al disco.",
                    "Un stream para leer datos secuencialmente desde una conexi√≥n de red.",
                    "Una librer√≠a utilizada exclusivamente para crear y modificar ficheros XML.",
                    "Un almac√©n de datos permanente en el disco duro."
                ],
                correct: 0,
                justification: "El b√∫fer act√∫a como memoria intermedia para leer/escribir bloques grandes, minimizando las lentas operaciones de E/S f√≠sicas."
            },
            {
                q: "¬øQu√© comando SQL, clasificado como Lenguaje de Definici√≥n de Datos (DDL), se utiliza para eliminar por completo una tabla o una base de datos, borrando tambi√©n todos sus registros?",
                options: [
                    "DROP.",
                    "DELETE.",
                    "ALTER.",
                    "RENAME."
                ],
                correct: 0,
                justification: "DROP elimina el objeto (tabla/BD) y todo su contenido irreversiblemente."
            },
            {
                q: "¬øQu√© representa el llamado 'desfase objeto-relacional' (Object-Relational Impedance Mismatch)?",
                options: [
                    "La diferencia estructural y de relaciones que surge al desarrollar aplicaciones orientadas a objetos que usan una base de datos de tipo relacional.",
                    "La necesidad de usar sentencias DDL para manipular la estructura de la base de datos.",
                    "La dificultad de mantener la coherencia de datos entre m√∫ltiples instancias de bases de datos.",
                    "El error que se produce al intentar conectar una aplicaci√≥n orientada a objetos a una base de datos no compatible."
                ],
                correct: 0,
                justification: "Es la incompatibilidad fundamental entre el modelo de grafos de objetos y el modelo de tablas relacionales."
            },

            // --- BLOQUE 7: MANUALES (IMAGEN DAYPO) ---
            {
                q: "UF2. En el manual de administraci√≥n:",
                options: [
                    "Es preciso indicar al usuario los diferentes pasos que se deben seguir para poder desarrollar un trabajo.",
                    "Hace √©nfasis en la extensi√≥n y la cantidad de informaci√≥n disponible.",
                    "Se dispone de un resumen con todos los aspectos m√°s importantes que se han desarrollado en la documentaci√≥n previa.",
                    "Viene detallado el proceso de configuraci√≥n de aquellos componentes que forman parte del sistema."
                ],
                correct: 3,
                justification: "El manual de administraci√≥n est√° orientado a la configuraci√≥n t√©cnica y mantenimiento, no al usuario final."
            }
        ]; 

       

            // --- L√ìGICA DEL TEST ---
            const els = {
                start: document.getElementById('start-screen'),
                quiz: document.getElementById('quiz-screen'),
                result: document.getElementById('result-screen'),
                status: document.getElementById('status-bar'),
                nextCont: document.getElementById('next-container'),
                qText: document.getElementById('question-text'),
                opts: document.getElementById('options-container'),
                curQ: document.getElementById('current-q'),
                totQ: document.getElementById('total-q'),
                scDisp: document.getElementById('score-display'),
                errDisp: document.getElementById('errors-display'),
                fbArea: document.getElementById('feedback-area'),
                fbTitle: document.getElementById('feedback-title'),
                fbText: document.getElementById('feedback-text'),
                fbIcon: document.getElementById('feedback-icon'),
                startTotal: document.getElementById('start-total-q'),
                btnStart: document.getElementById('btn-start'),
                btnRestart: document.getElementById('btn-restart'),
                btnNext: document.getElementById('btn-next'),
                btnRetry: document.getElementById('retry-failed-btn')
            };

            let quizQuestions = [], failedQuestions = [], currentQuestionIndex = 0;
            let score = 0, errors = 0, isAnswered = false;

            // Mostrar total al inicio
            els.startTotal.innerText = rawQuestions.length;

            // Event Listeners
            els.btnStart.addEventListener('click', () => startQuiz(false));
            els.btnRestart.addEventListener('click', () => startQuiz(false));
            els.btnRetry.addEventListener('click', () => startQuiz(true));
            els.btnNext.addEventListener('click', nextQuestion);

            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            function startQuiz(retryMode) {
                let source = retryMode ? failedQuestions : JSON.parse(JSON.stringify(rawQuestions));
                if (source.length === 0) return alert("No hay preguntas para repasar.");

                // Barajar preguntas y opciones
                quizQuestions = shuffle([...source]).map(q => {
                    const correctTxt = q.options[q.correct];
                    q.options = shuffle(q.options);
                    q.correct = q.options.indexOf(correctTxt);
                    return q;
                });

                if(!retryMode) failedQuestions = [];
                currentQuestionIndex = 0; score = 0; errors = 0;
                updateStats();
                
                // Cambio de pantalla
                els.start.classList.add('hidden');
                els.result.classList.add('hidden');
                els.quiz.classList.remove('hidden');
                els.status.classList.remove('hidden');
                els.nextCont.classList.add('hidden'); 
                
                renderQuestion();
            }

            function updateStats() {
                els.curQ.innerText = currentQuestionIndex + 1;
                els.totQ.innerText = quizQuestions.length;
                els.scDisp.innerText = score;
                els.errDisp.innerText = errors;
            }

            function renderQuestion() {
                isAnswered = false;
                const q = quizQuestions[currentQuestionIndex];
                
                updateStats();
                els.qText.innerText = q.q;
                els.opts.innerHTML = '';
                els.fbArea.classList.add('hidden');
                els.nextCont.classList.add('hidden');
                
                window.scrollTo(0, 0);

                q.options.forEach((opt, index) => {
                    const btn = document.createElement('button');
                    btn.className = "option-card w-full text-left p-4 rounded-xl border-2 border-gray-200 bg-white text-gray-700 font-medium flex items-center gap-3 group hover:border-indigo-300";
                    
                    const letter = String.fromCharCode(65 + index);
                    btn.innerHTML = `<span class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-500 rounded-full font-bold text-sm transition-colors group-hover:bg-indigo-100 group-hover:text-indigo-600">${letter}</span><span class="leading-snug">${opt}</span>`;
                    
                    btn.onclick = () => checkAnswer(index, btn);
                    els.opts.appendChild(btn);
                });
            }

            function checkAnswer(idx, btn) {
                if (isAnswered) return;
                isAnswered = true;
                const q = quizQuestions[currentQuestionIndex];
                const isCorrect = idx === q.correct;
                const allBtns = els.opts.children;

                Array.from(allBtns).forEach(b => {
                    b.disabled = true;
                    b.classList.add('opacity-60', 'cursor-not-allowed');
                    b.classList.remove('hover:border-indigo-300');
                });
                btn.classList.remove('opacity-60');

                if (isCorrect) {
                    score++;
                    styleBtn(btn, 'correct');
                    showFeedback(true, q.justification);
                } else {
                    errors++;
                    if (!failedQuestions.some(fq => fq.q === q.q)) failedQuestions.push(q);
                    styleBtn(btn, 'incorrect');
                    const correctBtn = allBtns[q.correct];
                    correctBtn.classList.remove('opacity-60');
                    styleBtn(correctBtn, 'correct');
                    showFeedback(false, q.justification);
                }
                
                updateStats();
                els.nextCont.classList.remove('hidden');
            }

            function styleBtn(btn, type) {
                btn.classList.remove('border-gray-200', 'bg-white', 'text-gray-700');
                if (type === 'correct') {
                    btn.classList.add('border-green-500', 'bg-green-50', 'text-green-900');
                    btn.querySelector('span:first-child').className = "flex-shrink-0 w-8 h-8 flex items-center justify-center bg-green-200 text-green-700 rounded-full font-bold text-sm";
                } else {
                    btn.classList.add('border-red-500', 'bg-red-50', 'text-red-900');
                    btn.querySelector('span:first-child').className = "flex-shrink-0 w-8 h-8 flex items-center justify-center bg-red-200 text-red-700 rounded-full font-bold text-sm";
                }
            }

            function showFeedback(isCorrect, text) {
                els.fbArea.classList.remove('hidden');
                els.fbIcon.innerHTML = isCorrect ? '<i class="fas fa-check-circle text-green-500"></i>' : '<i class="fas fa-times-circle text-red-500"></i>';
                els.fbTitle.innerText = isCorrect ? "¬°Correcto!" : "Soluci√≥n Correcta:";
                els.fbTitle.className = `font-bold text-base mb-1 ${isCorrect ? 'text-green-700' : 'text-red-700'}`;
                els.fbText.innerText = text || "Sin justificaci√≥n.";
                
                setTimeout(() => {
                    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
                }, 100);
            }

            function nextQuestion() {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizQuestions.length) {
                    renderQuestion();
                } else {
                    showResult();
                }
            }

            function showResult() {
                els.quiz.classList.add('hidden');
                els.status.classList.add('hidden');
                els.nextCont.classList.add('hidden');
                els.result.classList.remove('hidden');

                const total = quizQuestions.length;
                const pct = Math.round((score / total) * 100);
                
                document.getElementById('final-score-text').innerText = `${score} / ${total}`;
                document.getElementById('final-progress-bar').style.width = `${pct}%`;

                // Bot√≥n Retry
                els.btnRetry.classList.toggle('hidden', failedQuestions.length === 0);
                if (failedQuestions.length > 0) els.btnRetry.innerHTML = `<i class="fas fa-hammer"></i> Repasar ${failedQuestions.length} Fallos`;

                const circle = document.getElementById('score-circle');
                const msg = document.getElementById('score-message');
                circle.className = "w-32 h-32 mx-auto rounded-full flex items-center justify-center text-5xl shadow-xl relative z-10 bg-white border-4 mb-4";

                if (pct >= 90) {
                    circle.classList.add('border-indigo-500', 'text-indigo-600');
                    circle.innerHTML = '<i class="fas fa-trophy"></i>';
                    msg.innerText = "¬°IMPRESIONANTE! Nivel Experto üèÜ";
                } else if (pct >= 50) {
                    circle.classList.add('border-blue-500', 'text-blue-600');
                    circle.innerHTML = '<i class="fas fa-thumbs-up"></i>';
                    msg.innerText = "¬°Aprobado! Buen trabajo üëç";
                } else {
                    circle.classList.add('border-red-500', 'text-red-600');
                    circle.innerHTML = '<i class="fas fa-book-open"></i>';
                    msg.innerText = "Toca estudiar m√°s... üìö";
                }
            }

        });
    </script>
</body>
</html>