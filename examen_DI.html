<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游닄</text></svg>">
    <script data-goatcounter="https://jrenedo.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

    <title>Examen DI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f0fdf4; /* Fondo verde muy suave */ }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .option-card { transition: all 0.2s ease; }
        .option-card:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        
        /* Animaci칩n suave para el bot칩n siguiente */
        #next-container { transition: all 0.3s ease; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-2xl shadow-xl w-full max-w-3xl flex flex-col relative overflow-hidden min-h-[650px] border-t-4 border-green-600">
        
        <div class="bg-green-600 p-5 text-white flex justify-between items-center z-10 shadow-md flex-shrink-0">
            <h1 class="text-lg font-bold flex items-center gap-2">
                <i class="fas fa-desktop"></i> Examen DI
            </h1>
            <div id="status-bar" class="hidden flex gap-3 text-sm font-medium">
                <div class="bg-green-700 px-3 py-1 rounded-lg flex items-center gap-2">
                    <span class="text-green-200"><i class="fas fa-check"></i> <span id="score-display">0</span></span>
                    <span class="text-red-200 ml-2"><i class="fas fa-times"></i> <span id="errors-display">0</span></span>
                </div>
                <div class="bg-green-500 px-3 py-1 rounded-full w-16 text-center">
                    <span id="current-q">1</span>/<span id="total-q">0</span>
                </div>
            </div>
        </div>

        <div class="flex-1 p-6 sm:p-8 overflow-y-auto flex flex-col bg-gray-50 relative">
            
            <div id="start-screen" class="text-center space-y-8 fade-in my-auto">
                <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto text-green-600 text-4xl mb-4 shadow-sm">
                    <i class="fas fa-pencil-ruler"></i>
                </div>
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Desarrollo de Interfaces</h2>
                    <p class="text-gray-500">100+ Preguntas</p>
                </div>
                
                <div class="grid grid-cols-2 gap-4 max-w-xs mx-auto text-sm text-gray-600">
                    <div class="bg-white p-3 rounded-lg border border-gray-200 shadow-sm">
                        <i class="fas fa-list-ol text-green-500 mb-1 block text-lg"></i>
                        <span id="start-total-q">--</span> Preguntas
                    </div>
                    <div class="bg-white p-3 rounded-lg border border-gray-200 shadow-sm">
                        <i class="fas fa-random text-green-500 mb-1 block text-lg"></i>
                        Aleatorio
                    </div>
                </div>

                <button onclick="startQuiz()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-10 rounded-xl w-full max-w-sm mx-auto shadow-lg transition-transform transform hover:scale-105 flex justify-center items-center gap-2 text-lg">
                    <i class="fas fa-play"></i> Comenzar Test
                </button>
            </div>

            <div id="quiz-screen" class="hidden flex flex-col fade-in w-full max-w-2xl mx-auto flex-grow">
                
                <div class="mb-6">
                    <span class="text-xs font-bold text-green-600 uppercase tracking-wider mb-2 block">Pregunta</span>
                    <h3 id="question-text" class="text-xl sm:text-2xl font-bold text-gray-800 leading-snug"></h3>
                </div>

                <div id="options-container" class="space-y-3 flex-grow">
                    </div>

                <div id="feedback-area" class="hidden mt-6 pt-6 border-t border-gray-200 fade-in">
                    <div class="flex gap-4 mb-4 items-start bg-white p-4 rounded-lg border border-gray-100 shadow-sm">
                        <div id="feedback-icon" class="text-2xl flex-shrink-0 mt-1"></div>
                        <div>
                            <h4 id="feedback-title" class="font-bold text-base mb-1"></h4>
                            <p id="feedback-text" class="text-gray-600 text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="result-screen" class="hidden text-center space-y-8 fade-in my-auto">
                <div class="relative inline-block">
                    <div class="w-32 h-32 mx-auto rounded-full flex items-center justify-center text-5xl shadow-xl relative z-10 bg-white border-4" id="score-circle"></div>
                </div>
                
                <div>
                    <h2 class="text-4xl font-black text-gray-800 mb-1" id="final-score-text">0/0</h2>
                    <p class="text-gray-500 text-sm font-semibold uppercase">Resultado Final</p>
                </div>

                <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden max-w-sm mx-auto">
                    <div id="final-progress-bar" class="bg-green-600 h-full rounded-full transition-all duration-1000" style="width: 0%"></div>
                </div>
                
                <p id="score-message" class="font-medium text-green-700 text-lg"></p>

                <div class="flex flex-col gap-3 max-w-xs mx-auto pt-4">
                    <button id="retry-failed-btn" onclick="restartQuiz(true)" class="hidden bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-md w-full transition-colors flex justify-center items-center gap-2">
                        <i class="fas fa-hammer"></i> Repasar Fallos
                    </button>
                    <button onclick="restartQuiz(false)" class="bg-white border-2 border-green-600 text-green-600 hover:bg-green-50 font-bold py-3 px-6 rounded-lg w-full transition-colors">
                        <i class="fas fa-redo"></i> Reiniciar Todo
                    </button>
                </div>
            </div>

        </div>

        <div id="next-container" class="hidden bg-white border-t p-4 z-20 sticky bottom-0 w-full shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
            <button onclick="nextQuestion()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl text-lg shadow-md transition-colors flex justify-center items-center gap-2">
                Siguiente Pregunta <i class="fas fa-arrow-right"></i>
            </button>
        </div>

    </div>

    <script>
        // --- BASE DE DATOS DE PREGUNTAS DI ---
        const rawQuestions = [
            {
                q: "Seg칰n la metodolog칤a de dise침o de informes, 쯖u치l es el primer paso fundamental antes de definir la apariencia?",
                options: ["Selecci칩n de datos", "Dise침o de la cabecera", "Agrupaci칩n visual", "Exportaci칩n a PDF"],
                correct: 0,
                justification: "El temario indica que antes de comenzar con el dise침o visual, es preciso identificar qu칠 se debe representar y realizar la selecci칩n de datos."
            },
            {
                q: "쯈u칠 evento de teclado se dispara inmediatamente al presionar una tecla?",
                options: ["keyPressed", "keyTyped", "keyReleased", "keyEntered"],
                correct: 0,
                justification: "<b>keyPressed</b> se produce al presionar la tecla. <b>keyTyped</b> requiere pulsar y soltar (car치cter). <b>keyReleased</b> al soltar."
            },
            {
                q: "쯈u칠 definici칩n describe mejor a una GUI?",
                options: ["Conjunto de elementos gr치ficos para comunicaci칩n usuario-sistema", "Distribuci칩n f칤sica de los componentes hardware", "C칩digo fuente del n칰cleo del sistema", "Protocolo de red para transmisi칩n de datos"],
                correct: 0,
                justification: "La GUI es el medio visual (iconos, ventanas) que permite la interacci칩n, en contraposici칩n a la l칤nea de comandos."
            },
            {
                q: "En una clase, 쯤u칠 representa una propiedad simple?",
                options: ["Un valor 칰nico que define un estado", "Una colecci칩n de objetos", "Un m칠todo sin retorno", "Un evento del sistema"],
                correct: 0,
                justification: "Una propiedad simple almacena un dato at칩mico (ej. color, tama침o) que refleja el estado del objeto."
            },
            {
                q: "쯈u칠 herramientas se utilizan habitualmente para la evaluaci칩n de la usabilidad?",
                options: ["Entrevistas, tests y cuestionarios", "Solo compiladores de c칩digo", "Analizadores de base de datos", "Depuradores de memoria"],
                correct: 0,
                justification: "La evaluaci칩n de usabilidad emplea m칠todos cualitativos y cuantitativos como entrevistas, test con usuarios y cuestionarios."
            },
            {
                q: "쯈u칠 funci칩n cumple el evento `keyPressed`?",
                options: ["Detecta el acto inicial de presionar una tecla", "Detecta cuando se suelta la tecla", "Detecta un car치cter completo", "Detecta el clic del rat칩n"],
                correct: 0,
                justification: "Es el evento primario que captura la acci칩n f칤sica de bajar la tecla, antes de que se genere el car치cter."
            },
            {
                q: "Un componente de software integra:",
                options: ["Propiedades, eventos y m칠todos", "Solo variables globales", "Solo la interfaz visual", "Solo la l칩gica de base de datos"],
                correct: 0,
                justification: "Un componente encapsula estado (propiedades), comportamiento (m칠todos) y comunicaci칩n (eventos)."
            },
            {
                q: "Un 'escuchador' (listener) funciona de manera:",
                options: ["As칤ncrona", "S칤ncrona", "Secuencial", "Bloqueante"],
                correct: 0,
                justification: "Los listeners son as칤ncronos: reaccionan cuando ocurre el evento sin detener el flujo principal del programa."
            },
            {
                q: "쯈u칠 evento de teclado implica el ciclo completo de pulsar y soltar (generando car치cter)?",
                options: ["keyTyped", "keyReleased", "keyPressed", "keyDown"],
                correct: 0,
                justification: "<b>keyTyped</b> es el evento de alto nivel que indica que se ha introducido un car치cter completo."
            },
            {
                q: "쮺u치les son formas v치lidas de comunicarse con un ordenador?",
                options: ["Gr치fica, l칤nea de comandos y natural (voz/tacto)", "Exclusivamente entorno gr치fico", "Exclusivamente l칤nea de comandos", "Solo mediante perif칠ricos de salida"],
                correct: 0,
                justification: "Existen m칰ltiples interfaces: GUI (Gr치fica), CLI (L칤nea de comandos) y NUI (Interfaz natural)."
            },
            {
                q: "Seg칰n Nielsen, los pilares de la estructura visual son:",
                options: ["Jerarqu칤a, foco, homogeneidad y relaciones", "Color, sonido, v칤deo y texto", "Complejidad, detalle, realismo y sombras", "Originalidad, sorpresa, caos y arte"],
                correct: 0,
                justification: "Una buena estructura requiere jerarqu칤a visual, foco de atenci칩n, homogeneidad y relaciones l칩gicas."
            },
            {
                q: "쮺u치l es la funci칩n principal de SVG?",
                options: ["Definir gr치ficos vectoriales 2D mediante XML", "Renderizar mapas de bits (p칤xeles)", "Gestionar bases de datos", "Compilar c칩digo m치quina"],
                correct: 0,
                justification: "SVG describe gr치ficos vectoriales escalables usando marcado XML."
            },
            {
                q: "La secci칩n 'Cabecera del Informe' se caracteriza por:",
                options: ["Aparecer una 칰nica vez al inicio del documento", "Repetirse en cada p치gina", "Aparecer al final del documento", "Contener los datos detallados"],
                correct: 0,
                justification: "La cabecera del informe es distinta de la cabecera de p치gina; solo se imprime al comienzo absoluto."
            },
            {
                q: "쯈u칠 control permite selecci칩n m칰ltiple independiente?",
                options: ["CheckBox", "RadioButton", "ComboBox", "TextBox"],
                correct: 0,
                justification: "El <b>CheckBox</b> permite marcar varias opciones independientemente. RadioButton es excluyente."
            },
            {
                q: "Un beneficio clave de la usabilidad es:",
                options: ["Reducci칩n de costes de aprendizaje", "Aumento de la complejidad t칠cnica", "Mayor consumo de recursos", "Uso de colores m치s brillantes"],
                correct: 0,
                justification: "Facilita el aprendizaje del usuario, reduciendo costes de formaci칩n y soporte."
            },
            {
                q: "쯈u칠 propiedad NO es l칩gica de un CheckBox?",
                options: ["Stretch", "IsChecked", "Content", "IsEnabled"],
                correct: 0,
                justification: "IsChecked, Content e IsEnabled son l칩gicas. 'Stretch' es una propiedad de dise침o/layout (com칰n en im치genes)."
            },
            {
                q: "La heur칤stica 'Visibilidad del estado del sistema' implica:",
                options: ["Mantener al usuario informado con feedback constante", "Hacer visible el c칩digo fuente", "Usar dise침os transparentes", "Permitir deshacer indefinidamente"],
                correct: 0,
                justification: "El sistema debe informar siempre de lo que est치 ocurriendo (ej. barras de carga)."
            },
            {
                q: "쯇ara qu칠 sirve un archivo de soluci칩n (.sln) en Visual Studio?",
                options: ["Agrupar y organizar proyectos relacionados", "Compilar el c칩digo fuente", "Guardar preferencias del editor", "Almacenar datos de la aplicaci칩n"],
                correct: 0,
                justification: "El archivo .sln es un contenedor que agrupa varios proyectos (.csproj, etc.) para gestionarlos juntos."
            },
            {
                q: "쯇or qu칠 se aconseja usar listas desplegables (ComboBox)?",
                options: ["Ahorran espacio y validan la entrada", "Permiten escribir textos largos", "Son m치s f치ciles de programar", "Permiten selecci칩n m칰ltiple visual"],
                correct: 0,
                justification: "Ocupan poco espacio y limitan la entrada a valores predefinidos v치lidos."
            },
            {
                q: "Que NetBeans sea de 'C칩digo Abierto' significa:",
                options: ["Su c칩digo fuente es accesible y modificable", "Solo funciona en sistemas Linux", "No tiene soporte oficial", "Solo permite programar en Java"],
                correct: 0,
                justification: "Permite el acceso al c칩digo fuente para su estudio, modificaci칩n y redistribuci칩n."
            },
            {
                q: "쯈u칠 es XAML?",
                options: ["Lenguaje declarativo para interfaces gr치ficas", "Lenguaje de programaci칩n compilado", "Motor de base de datos", "Protocolo de comunicaci칩n"],
                correct: 0,
                justification: "XAML define la interfaz de usuario en tecnolog칤as Microsoft (WPF, UWP) separ치ndola de la l칩gica."
            },
            {
                q: "En XAML, 쯤u칠 atributo identifica un칤vocamente un elemento?",
                options: ["x:Name", "ID", "Key", "Tag"],
                correct: 0,
                justification: "El atributo <b>Name</b> (o x:Name) asigna el identificador para el code-behind."
            },
            {
                q: "El evento que ocurre al salir el puntero de un componente es:",
                options: ["mouseExited", "mouseEntered", "mouseReleased", "mouseClicked"],
                correct: 0,
                justification: "<b>mouseExited</b> se dispara cuando el cursor abandona el 치rea visual del control."
            },
            {
                q: "Un cuadro de di치logo MODAL:",
                options: ["Bloquea la interacci칩n con la ventana padre", "Permite usar otras ventanas simult치neamente", "Se cierra autom치ticamente", "No tiene bordes"],
                correct: 0,
                justification: "Exige atenci칩n inmediata e impide volver a la ventana principal hasta cerrarlo."
            },
            {
                q: "Un principio b치sico de dise침o de interfaces es:",
                options: ["Consistencia", "Ambig칲edad", "Complejidad", "Opacidad"],
                correct: 0,
                justification: "La consistencia asegura que elementos similares funcionen de manera similar."
            },
            {
                q: "Sobre el uso de fuentes, se recomienda:",
                options: ["Usar sem치ntica clara y limitar la variedad", "Usar muchas fuentes distintas", "Escribir todo en may칰sculas", "Usar fuentes dif칤ciles de leer"],
                correct: 0,
                justification: "La legibilidad y la jerarqu칤a son claves; el exceso de fuentes confunde."
            },
            {
                q: "La secci칩n 'Cuerpo' de un informe:",
                options: ["Se repite por cada registro de datos", "Aparece una vez por p치gina", "Contiene solo los totales", "Muestra el t칤tulo principal"],
                correct: 0,
                justification: "Es la secci칩n iterativa donde se muestran los datos detallados."
            },
            {
                q: "Los componentes heredados de `UserControl` obtienen:",
                options: ["Propiedades, eventos y m칠todos base", "Solo la apariencia visual", "Ninguna funcionalidad", "Solo m칠todos privados"],
                correct: 0,
                justification: "Heredan toda la funcionalidad est치ndar del control de usuario base."
            },
            {
                q: "Eclipse destaca por:",
                options: ["Su arquitectura de plugins multiprop칩sito", "Ser exclusivo de Windows", "No permitir depuraci칩n", "Ser de pago"],
                correct: 0,
                justification: "Su sistema de plugins permite soportar casi cualquier lenguaje (Java, C++, PHP, etc.)."
            },
            {
                q: "Los elementos principales de un SVG son:",
                options: ["Contenedores, gr치ficos, definiciones y animaciones", "Tablas, filas y columnas", "Clases, objetos y m칠todos", "Cabeceras y pies de p치gina"],
                correct: 0,
                justification: "Se estructura en formas, grupos, definiciones de estilo y comportamientos."
            },
            {
                q: "쯈u칠 ofrece una 'Gu칤a R치pida'?",
                options: ["Resumen de funcionalidades esenciales", "Documentaci칩n t칠cnica completa", "C칩digo fuente del sistema", "Manual de administraci칩n"],
                correct: 0,
                justification: "Permite al usuario empezar a usar el producto inmediatamente sin leer todo el manual."
            },
            {
                q: "Las pruebas funcionales verifican:",
                options: ["El cumplimiento de requisitos (qu칠 hace)", "La estructura interna (c칩mo lo hace)", "El rendimiento (cu치nto tarda)", "La est칠tica (c칩mo se ve)"],
                correct: 0,
                justification: "Son pruebas de caja negra que validan entradas frente a salidas esperadas."
            },
            {
                q: "Las pruebas de 'Caja Blanca' analizan:",
                options: ["La estructura interna y l칩gica del c칩digo", "La interfaz de usuario", "El comportamiento externo", "La documentaci칩n"],
                correct: 0,
                justification: "Requieren acceso al c칩digo fuente para verificar caminos l칩gicos y condiciones."
            },
            {
                q: "Las pruebas de 'Caja Negra' analizan:",
                options: ["Entradas y salidas sin ver el c칩digo", "El c칩digo fuente l칤nea por l칤nea", "El hardware del servidor", "La base de datos directamente"],
                correct: 0,
                justification: "Se eval칰a la funcionalidad externa sin conocer la implementaci칩n interna."
            },
            {
                q: "Una prueba BETA se realiza:",
                options: ["Por usuarios finales en entorno real", "Por desarrolladores en laboratorio", "Por auditores de seguridad", "Autom치ticamente por bots"],
                correct: 0,
                justification: "Externaliza la validaci칩n a usuarios reales antes del lanzamiento oficial."
            },
            {
                q: "Las Pruebas de Sistema validan:",
                options: ["El sistema completo e integrado", "M칩dulos aislados", "Solo el c칩digo fuente", "Solo el dise침o gr치fico"],
                correct: 0,
                justification: "Verifican que el sistema como un todo cumple los requisitos."
            },
            {
                q: "Las pruebas de seguridad verifican:",
                options: ["Integridad, confidencialidad y acceso", "Velocidad de procesamiento", "Est칠tica de la interfaz", "Facilidad de instalaci칩n"],
                correct: 0,
                justification: "Buscan vulnerabilidades y fallos en mecanismos de protecci칩n."
            },
            {
                q: "La ayuda contextual al pasar el rat칩n se llama:",
                options: ["Tooltip", "Pop-up", "Modal", "Menu"],
                correct: 0,
                justification: "Peque침a etiqueta informativa que aparece al hacer 'hover'."
            },
            {
                q: "Las pruebas de integraci칩n verifican:",
                options: ["La interacci칩n entre m칩dulos", "El funcionamiento de una funci칩n", "El sistema completo", "La ortograf칤a"],
                correct: 0,
                justification: "Aseguran que las piezas probadas individualmente funcionen bien juntas."
            },
            {
                q: "Una prueba unitaria verifica:",
                options: ["Una unidad m칤nima de c칩digo aislada", "Todo el sistema a la vez", "La experiencia de usuario", "La base de datos en producci칩n"],
                correct: 0,
                justification: "A칤sla m칠todos o clases para asegurar su correcci칩n l칩gica."
            },
            {
                q: "La prueba ALFA se realiza:",
                options: ["En entorno controlado (desarrollador)", "En casa del cliente", "En producci칩n real", "Despu칠s de la Beta"],
                correct: 0,
                justification: "Primera fase de pruebas completas, realizada internamente."
            },
            {
                q: "쯈u칠 herramienta NO genera documentaci칩n?",
                options: ["DocFinger", "HelpNDoc", "SandCastle", "GhostDoc"],
                correct: 0,
                justification: "DocFinger no es una herramienta est치ndar conocida; las otras s칤."
            },
            {
                q: "La 'Prueba de Recuperaci칩n' verifica:",
                options: ["La restauraci칩n tras un fallo", "La velocidad de respuesta", "La seguridad del login", "La usabilidad del men칰"],
                correct: 0,
                justification: "Fuerza fallos para comprobar si el sistema puede recuperarse."
            },
            {
                q: "쯇ara qu칠 sirve NuGet?",
                options: ["Gesti칩n de paquetes y dependencias", "Compilaci칩n de c칩digo", "Edici칩n de texto", "Dise침o gr치fico"],
                correct: 0,
                justification: "Facilita la instalaci칩n y actualizaci칩n de librer칤as en .NET."
            },
            {
                q: "Una 'M칠trica Directa' se obtiene:",
                options: ["Midiendo un atributo directamente", "Calculando una f칩rmula compleja", "Mediante encuestas subjetivas", "Estimando al azar"],
                correct: 0,
                justification: "Ej: contar errores, medir tiempo. No requiere derivaci칩n."
            },
            {
                q: "Una 'M칠trica Indirecta' se obtiene:",
                options: ["Relacionando dos o m치s m칠tricas", "Midiendo directamente con un reloj", "Contando elementos simples", "Por intuici칩n"],
                correct: 0,
                justification: "Ej: Densidad de defectos (Defectos / L칤neas de c칩digo)."
            },
            {
                q: "Las pruebas de 'Uso de Recursos' miden:",
                options: ["Consumo de CPU, RAM y disco", "Errores de sintaxis", "Calidad del dise침o", "Satisfacci칩n del usuario"],
                correct: 0,
                justification: "Buscan cuellos de botella y fugas de memoria."
            },
            {
                q: "La firma digital de componentes garantiza:",
                options: ["Autenticidad e integridad del origen", "Encriptaci칩n del contenido", "Compresi칩n del archivo", "Velocidad de ejecuci칩n"],
                correct: 0,
                justification: "Asegura que el c칩digo viene de quien dice y no ha sido alterado."
            },
            {
                q: "En versionado est치ndar, los n칰meros impares suelen indicar:",
                options: ["Versiones de desarrollo (inestables)", "Versiones finales estables", "Versiones obsoletas", "Versiones de pago"],
                correct: 0,
                justification: "Convenci칩n com칰n (ej. Linux): Pares=Estable, Impares=Desarrollo."
            },
            {
                q: "Los 'Paquetes Gestionados' permiten:",
                options: ["Distribuci칩n controlada y actualizaciones", "Modificaci칩n libre del c칩digo", "Creaci칩n de malware", "Borrado de datos"],
                correct: 0,
                justification: "Protegen la propiedad intelectual y facilitan la gesti칩n de versiones."
            },
            {
                q: "Las pruebas de regresi칩n aseguran:",
                options: ["Que cambios nuevos no rompan lo existente", "Que se pueda volver atr치s", "Que el sistema sea r치pido", "Que se instale bien"],
                correct: 0,
                justification: "Cruciales en mantenimiento para evitar reintroducir bugs."
            },
            {
                q: "Herramientas principales de reporting:",
                options: ["JasperReports y Reporting Services", "Word y Excel", "Photoshop e Illustrator", "Notepad y Calc"],
                correct: 0,
                justification: "Est치ndares en Java y .NET respectivamente."
            },
            {
                q: "MXML se asocia a:",
                options: ["Adobe Flex", "Microsoft WPF", "Java Swing", "Mozilla XUL"],
                correct: 0,
                justification: "Lenguaje de marcado para interfaces ricas en el ecosistema Flash/Flex."
            },
            {
                q: "XUL se asocia a:",
                options: ["Mozilla (Gecko)", "Microsoft (Edge)", "Google (Chrome)", "Apple (Safari)"],
                correct: 0,
                justification: "Lenguaje de interfaz usado en Firefox y Thunderbird."
            },
            {
                q: "La 'Facilidad de Aprendizaje' mide:",
                options: ["El desempe침o del usuario novato", "El desempe침o del usuario experto", "La memoria utilizada", "El coste del producto"],
                correct: 0,
                justification: "Curva de aprendizaje inicial."
            },
            {
                q: "T칠cnica de prueba de Caja Negra:",
                options: ["Partici칩n de equivalencia", "Cobertura de sentencias", "An치lisis de flujo", "Inspecci칩n de c칩digo"],
                correct: 0,
                justification: "Divide entradas en clases sin ver el c칩digo interno."
            },
            {
                q: "Constructor correcto en Java para `Alumno`:",
                options: ["public Alumno()", "public void Alumno()", "public class Alumno", "new Alumno()"],
                correct: 0,
                justification: "Mismo nombre que la clase, sin tipo de retorno."
            },
            {
                q: "Formatos comunes de datos en informes:",
                options: ["Tabular y Matricial", "Texto plano", "Binario puro", "Im치genes sueltas"],
                correct: 0,
                justification: "Estructuras est치ndar para presentar datos organizados."
            },
            {
                q: "La Gu칤a de Usuario contiene:",
                options: ["Instrucciones operativas", "C칩digo fuente", "Diagramas t칠cnicos", "Biograf칤a del autor"],
                correct: 0,
                justification: "Orientada al uso diario del software."
            },
            {
                q: "Un 'Setter' sirve para:",
                options: ["Asignar valor a una propiedad", "Obtener valor de una propiedad", "Imprimir valor", "Borrar objeto"],
                correct: 0,
                justification: "Modifica el estado interno (encapsulamiento)."
            },
            {
                q: "Listener para clic de bot칩n en Java:",
                options: ["ActionListener", "MouseListener", "KeyListener", "WindowListener"],
                correct: 0,
                justification: "Maneja el evento sem치ntico de acci칩n (clic/intro)."
            },
            {
                q: "Pasos para usar un listener:",
                options: ["Implementar interfaz y registrar", "Solo importar", "Escribir en main", "Nada"],
                correct: 0,
                justification: "Patr칩n observador: definir acci칩n y suscribirse."
            },
            {
                q: "Un Listener es:",
                options: ["Objeto que espera y reacciona a eventos", "Un componente visual", "Un error", "Una base de datos"],
                correct: 0,
                justification: "Entidad que 'escucha' sucesos as칤ncronos."
            },
            {
                q: "Paquete base de eventos en Java:",
                options: ["java.awt.event", "java.util", "java.io", "javax.swing"],
                correct: 0,
                justification: "Contiene las interfaces fundamentales de eventos."
            },
            {
                q: "Evento de tecleo completo (con car치cter):",
                options: ["keyTyped", "keyPressed", "keyReleased", "mouseClicked"],
                correct: 0,
                justification: "Genera el car치cter Unicode final."
            },
            {
                q: "Las pruebas unitarias comparan:",
                options: ["Resultado obtenido vs esperado", "Velocidad vs Tiempo", "Usuario vs M치quina", "Color vs Forma"],
                correct: 0,
                justification: "Validez l칩gica de la unidad."
            },
            {
                q: "Convenci칩n para obtener valor (Java):",
                options: ["getNombre()", "setNombre()", "nombre()", "return()"],
                correct: 0,
                justification: "Getter est치ndar."
            },
            {
                q: "Atributo que NO es de JButton:",
                options: ["IsChecked", "IsEnabled", "Text", "ToolTip"],
                correct: 0,
                justification: "Botones simples no tienen estado 'marcado'."
            },
            {
                q: "Un Componente es:",
                options: ["Reutilizable y modular", "De un solo uso", "Monol칤tico", "Abstracto"],
                correct: 0,
                justification: "Unidad funcional independiente."
            },
            {
                q: "Archivo .nuspec contiene:",
                options: ["Metadatos del paquete", "C칩digo binario", "Base de datos", "Im치genes"],
                correct: 0,
                justification: "Manifiesto descriptivo para NuGet."
            },
            {
                q: "Propiedad de estado presionado en bot칩n:",
                options: ["IsPressed", "IsChecked", "IsSelected", "IsActive"],
                correct: 0,
                justification: "Indica si el bot칩n est치 hundido visualmente."
            },
            {
                q: "Dise침o de interfaz ideal:",
                options: ["Sencillo y predecible", "Complejo y denso", "Inconsistente", "Oscuro"],
                correct: 0,
                justification: "Facilita la interacci칩n y reduce carga cognitiva."
            },
            {
                q: "Extensibilidad de NetBeans/Eclipse:",
                options: ["Plugins para m칰ltiples lenguajes", "Solo Java", "Solo C#", "Solo texto"],
                correct: 0,
                justification: "Arquitectura modular."
            },
            {
                q: "Elemento `<g>` en SVG:",
                options: ["Agrupa elementos", "Dibuja l칤nea", "Crea enlace", "Nada"],
                correct: 0,
                justification: "Contenedor l칩gico para aplicar estilos/transformaciones."
            },
            {
                q: "Aplicaci칩n RIA:",
                options: ["Web con experiencia de escritorio", "Web est치tica", "Consola", "Sistema operativo"],
                correct: 0,
                justification: "Rich Internet Application (interactividad avanzada)."
            },
            {
                q: "Eficiencia en usabilidad (usuarios expertos):",
                options: ["Productividad tras aprender", "Facilidad inicial", "Est칠tica", "Errores"],
                correct: 0,
                justification: "Velocidad de uso una vez superada la curva de aprendizaje."
            },
            {
                q: "Pruebas de Sistema NO comprueban:",
                options: ["Integridad interna (caja blanca)", "Volumen", "Recuperaci칩n", "Seguridad"],
                correct: 0,
                justification: "Son pruebas de caja negra a nivel sistema."
            },
            {
                q: "Contenido del Manual de Usuario:",
                options: ["Gu칤a de uso", "C칩digo", "UML", "Compilaci칩n"],
                correct: 0,
                justification: "Enfoque operativo."
            },
            {
                q: "Secci칩n 'Descripci칩n' en publicaci칩n:",
                options: ["Datos b치sicos visibles", "C칩digo", "Base de datos", "Servidor"],
                correct: 0,
                justification: "Metadata informativa."
            },
            {
                q: "Secci칩n 'Implementaci칩n' en publicaci칩n:",
                options: ["M칠todo de despliegue", "Lenguaje", "Color", "Precio"],
                correct: 0,
                justification: "C칩mo se entrega el software."
            },
            {
                q: "Secci칩n 'Manifiesto' en publicaci칩n:",
                options: ["Permisos y dependencias", "Icono", "Autor", "Manual"],
                correct: 0,
                justification: "Requisitos de sistema y privilegios."
            },
            {
                q: "Secci칩n 'Asociaciones' en publicaci칩n:",
                options: ["Vincular extensiones de archivo", "Accesos directos", "Fondos", "Nada"],
                correct: 0,
                justification: "Abrir archivos con la app por defecto."
            },
            {
                q: "Entidad b치sica de POC:",
                options: ["Componente", "Funci칩n", "Puntero", "Variable"],
                correct: 0,
                justification: "Unidad fundamental."
            },
            {
                q: "Definici칩n de Evento:",
                options: ["Suceso al que responder", "Error", "Funci칩n", "Variable"],
                correct: 0,
                justification: "Base de la interactividad."
            },
            {
                q: "Pruebas de Comportamiento equivalen a:",
                options: ["Caja Negra", "Caja Blanca", "Unitarias", "Estr칠s"],
                correct: 0,
                justification: "Se mira el comportamiento externo."
            },
            {
                q: "Pruebas Estructurales equivalen a:",
                options: ["Caja Blanca", "Caja Negra", "Sistema", "Beta"],
                correct: 0,
                justification: "Se mira la estructura interna."
            },
            {
                q: "Tipos de datos en informes:",
                options: ["Diversos (Texto, Num, Fecha)", "Solo texto", "Solo n칰meros", "Solo im치genes"],
                correct: 0,
                justification: "Soportan tipos ricos."
            },
            {
                q: "Integraci칩n Ascendente:",
                options: ["Desde bajo nivel hacia arriba", "Desde men칰 hacia abajo", "Todo a la vez", "Aleatorio"],
                correct: 0,
                justification: "Bottom-up: cimientos primero."
            },
            {
                q: "Responsable Pruebas Aceptaci칩n:",
                options: ["Cliente", "Desarrollador", "Servidor", "Admin"],
                correct: 0,
                justification: "Validaci칩n final de negocio."
            },
            {
                q: "IDE oficial para XAML:",
                options: ["Visual Studio", "Eclipse", "NetBeans", "IntelliJ"],
                correct: 0,
                justification: "Herramienta nativa Microsoft."
            },
            {
                q: "Funci칩n de un 'Campo' en informe:",
                options: ["Mostrar dato espec칤fico", "Decorar", "Paginar", "Nada"],
                correct: 0,
                justification: "Dato din치mico."
            },
            {
                q: "Relaci칩n WPF - XAML:",
                options: ["XAML define la UI de WPF", "Rivales", "Sin relaci칩n", "WPF es web"],
                correct: 0,
                justification: "Framework y lenguaje de marcado."
            },
            {
                q: "Elemento 'deck' en XUL:",
                options: ["Pila de paneles (uno visible)", "Tabla", "Bot칩n", "Men칰"],
                correct: 0,
                justification: "Gesti칩n de vistas tipo mago."
            },
            {
                q: "Pruebas de Recursos eval칰an:",
                options: ["CPU y Memoria", "Funcionalidad", "Usabilidad", "Unidad"],
                correct: 0,
                justification: "Eficiencia hardware."
            },
            {
                q: "Pruebas de Seguridad eval칰an:",
                options: ["Integridad y acceso", "Velocidad", "Color", "Instalaci칩n"],
                correct: 0,
                justification: "Protecci칩n."
            },
            {
                q: "Visibilidad del estado (Nielsen):",
                options: ["Feedback constante", "Ver c칩digo", "Transparencia", "Nada"],
                correct: 0,
                justification: "Informar al usuario."
            },
            {
                q: "Archivo .csproj:",
                options: ["Configuraci칩n proyecto C#", "Ejecutable", "C칩digo", "Base datos"],
                correct: 0,
                justification: "Definici칩n del proyecto .NET."
            },
            {
                q: "Gu칤a R치pida:",
                options: ["Resumen esencial", "T칠cnico completo", "C칩digo", "Historia"],
                correct: 0,
                justification: "Inicio inmediato."
            },
            {
                q: "Objetivo Aceptaci칩n:",
                options: ["Validar requisitos negocio", "Bugs t칠cnicos", "Seguridad", "Compilaci칩n"],
                correct: 0,
                justification: "Visto bueno final."
            },
            {
                q: "Momento Pruebas Sistema:",
                options: ["Tras integraci칩n completa", "Al inicio", "Codificando", "Nunca"],
                correct: 0,
                justification: "Sobre el todo."
            },
            {
                q: "M칠trica Indirecta:",
                options: ["Calculada/Derivada", "Directa", "Estimada", "Err칩nea"],
                correct: 0,
                justification: "Requiere f칩rmula."
            }
        ];

        // --- L칍GICA DEL TEST ---
        let quizQuestions = [], failedQuestions = [], currentQuestionIndex = 0;
        let score = 0, errors = 0, isAnswered = false, isRetryMode = false;

        // Referencias DOM
        const els = {
            start: document.getElementById('start-screen'),
            quiz: document.getElementById('quiz-screen'),
            result: document.getElementById('result-screen'),
            status: document.getElementById('status-bar'),
            nextCont: document.getElementById('next-container'),
            qText: document.getElementById('question-text'),
            opts: document.getElementById('options-container'),
            curQ: document.getElementById('current-q'),
            totQ: document.getElementById('total-q'),
            scDisp: document.getElementById('score-display'),
            errDisp: document.getElementById('errors-display'),
            fbArea: document.getElementById('feedback-area'),
            fbTitle: document.getElementById('feedback-title'),
            fbText: document.getElementById('feedback-text'),
            fbIcon: document.getElementById('feedback-icon'),
            startTotal: document.getElementById('start-total-q')
        };

        // Inicializar
        els.startTotal.innerText = rawQuestions.length || 0;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz(retryMode = false) {
            isRetryMode = retryMode;
            let source = retryMode ? failedQuestions : JSON.parse(JSON.stringify(rawQuestions));
            
            if (source.length === 0) return alert("No hay preguntas para repasar.");

            // Barajar preguntas y opciones
            quizQuestions = shuffle([...source]).map(q => {
                const correctTxt = q.options[q.correct];
                q.options = shuffle(q.options);
                q.correct = q.options.indexOf(correctTxt);
                return q;
            });

            failedQuestions = [];
            currentQuestionIndex = 0; score = 0; errors = 0;
            updateStats();
            
            // UI Switch
            els.start.classList.add('hidden');
            els.result.classList.add('hidden');
            els.quiz.classList.remove('hidden');
            els.status.classList.remove('hidden');
            els.nextCont.classList.add('hidden'); // Ocultar bot칩n al inicio
            
            renderQuestion();
        }

        function updateStats() {
            els.curQ.innerText = currentQuestionIndex + 1;
            els.totQ.innerText = quizQuestions.length;
            els.scDisp.innerText = score;
            els.errDisp.innerText = errors;
        }

        function renderQuestion() {
            isAnswered = false;
            const q = quizQuestions[currentQuestionIndex];
            
            updateStats();
            els.qText.innerText = q.q;
            els.opts.innerHTML = '';
            els.fbArea.classList.add('hidden');
            els.nextCont.classList.add('hidden'); // Ocultar bot칩n "Siguiente"
            
            // Scroll arriba
            document.querySelector('.overflow-y-auto').scrollTop = 0;

            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "option-card w-full text-left p-4 rounded-xl border-2 border-gray-200 bg-white text-gray-700 font-medium flex items-center gap-3 group hover:border-green-300";
                
                const letter = String.fromCharCode(65 + index);
                btn.innerHTML = `<span class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-500 rounded-full font-bold text-sm transition-colors group-hover:bg-green-100 group-hover:text-green-600">${letter}</span><span class="leading-snug">${opt}</span>`;
                
                btn.onclick = () => checkAnswer(index, btn);
                els.opts.appendChild(btn);
            });
        }

        function checkAnswer(idx, btn) {
            if (isAnswered) return;
            isAnswered = true;
            const q = quizQuestions[currentQuestionIndex];
            const isCorrect = idx === q.correct;
            const allBtns = els.opts.children;

            // Deshabilitar
            Array.from(allBtns).forEach(b => {
                b.disabled = true;
                b.classList.add('opacity-60', 'cursor-not-allowed');
                b.classList.remove('hover:border-green-300');
            });
            btn.classList.remove('opacity-60');

            if (isCorrect) {
                score++;
                styleBtn(btn, 'correct');
                showFeedback(true, q.justification);
            } else {
                errors++;
                failedQuestions.push(q);
                styleBtn(btn, 'incorrect');
                // Mostrar correcta
                const correctBtn = allBtns[q.correct];
                correctBtn.classList.remove('opacity-60');
                styleBtn(correctBtn, 'correct');
                showFeedback(false, q.justification);
            }
            
            updateStats();
            // MOSTRAR BOT칍N SIGUIENTE (FIJO ABAJO)
            els.nextCont.classList.remove('hidden');
        }

        function styleBtn(btn, type) {
            btn.classList.remove('border-gray-200', 'bg-white', 'text-gray-700');
            if (type === 'correct') {
                btn.classList.add('border-green-500', 'bg-green-50', 'text-green-900');
                btn.querySelector('span:first-child').className = "flex-shrink-0 w-8 h-8 flex items-center justify-center bg-green-200 text-green-700 rounded-full font-bold text-sm";
            } else {
                btn.classList.add('border-red-500', 'bg-red-50', 'text-red-900');
                btn.querySelector('span:first-child').className = "flex-shrink-0 w-8 h-8 flex items-center justify-center bg-red-200 text-red-700 rounded-full font-bold text-sm";
            }
        }

        function showFeedback(isCorrect, text) {
            els.fbArea.classList.remove('hidden');
            els.fbIcon.innerHTML = isCorrect ? '<i class="fas fa-check-circle text-green-500"></i>' : '<i class="fas fa-times-circle text-red-500"></i>';
            els.fbTitle.innerText = isCorrect ? "춰Correcto!" : "Soluci칩n Correcta:";
            els.fbTitle.className = `font-bold text-base mb-1 ${isCorrect ? 'text-green-700' : 'text-red-700'}`;
            els.fbText.innerText = text || "Sin justificaci칩n.";
            
            // Scroll suave hacia abajo
            setTimeout(() => {
                const container = document.querySelector('.overflow-y-auto');
                container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
            }, 100);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizQuestions.length) {
                renderQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            els.quiz.classList.add('hidden');
            els.status.classList.add('hidden');
            els.nextCont.classList.add('hidden');
            els.result.classList.remove('hidden');

            const total = quizQuestions.length;
            const pct = Math.round((score / total) * 100);
            
            document.getElementById('final-score-text').innerText = `${score} / ${total}`;
            document.getElementById('final-progress-bar').style.width = `${pct}%`;

            // Bot칩n Repasar Fallos
            const retryBtn = document.getElementById('retry-failed-btn');
            retryBtn.classList.toggle('hidden', failedQuestions.length === 0);
            if (failedQuestions.length > 0) retryBtn.innerHTML = `<i class="fas fa-hammer"></i> Repasar ${failedQuestions.length} Fallos`;

            // Mensajes
            const circle = document.getElementById('score-circle');
            const msg = document.getElementById('score-message');
            circle.className = "w-32 h-32 mx-auto rounded-full flex items-center justify-center text-5xl shadow-xl relative z-10 bg-white border-4 mb-4";

            if (pct >= 90) {
                circle.classList.add('border-green-500', 'text-green-600');
                circle.innerHTML = '<i class="fas fa-trophy"></i>';
                msg.innerText = "춰IMPRESIONANTE! Nivel Experto 游끥";
            } else if (pct >= 50) {
                circle.classList.add('border-yellow-500', 'text-yellow-600');
                circle.innerHTML = '<i class="fas fa-thumbs-up"></i>';
                msg.innerText = "춰Aprobado! Buen trabajo 游녨";
            } else {
                circle.classList.add('border-red-500', 'text-red-600');
                circle.innerHTML = '<i class="fas fa-book-open"></i>';
                msg.innerText = "Toca estudiar m치s... 游닄";
            }
        }

        function restartQuiz(retry) {
            startQuiz(retry);
        }
    </script>
</body>
</html>
